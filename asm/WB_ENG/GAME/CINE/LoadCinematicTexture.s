.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

glabel LoadCinematicTexture
/* 31454 80040C54 A8FFBD27 */  addiu      $sp, $sp, -0x58
/* 31458 80040C58 5000BEAF */  sw         $fp, 0x50($sp)
/* 3145C 80040C5C 21F00000 */  addu       $fp, $zero, $zero
/* 31460 80040C60 3000B0AF */  sw         $s0, 0x30($sp)
/* 31464 80040C64 21808000 */  addu       $s0, $a0, $zero
/* 31468 80040C68 3800B2AF */  sw         $s2, 0x38($sp)
/* 3146C 80040C6C 2190E000 */  addu       $s2, $a3, $zero
/* 31470 80040C70 5400BFAF */  sw         $ra, 0x54($sp)
/* 31474 80040C74 4C00B7AF */  sw         $s7, 0x4C($sp)
/* 31478 80040C78 4800B6AF */  sw         $s6, 0x48($sp)
/* 3147C 80040C7C 4400B5AF */  sw         $s5, 0x44($sp)
/* 31480 80040C80 4000B4AF */  sw         $s4, 0x40($sp)
/* 31484 80040C84 3C00B3AF */  sw         $s3, 0x3C($sp)
/* 31488 80040C88 3400B1AF */  sw         $s1, 0x34($sp)
/* 3148C 80040C8C 5C00A5AF */  sw         $a1, 0x5C($sp)
/* 31490 80040C90 B35C010C */  jal        GetSizeOfFile
/* 31494 80040C94 6000A6AF */   sw        $a2, 0x60($sp)
/* 31498 80040C98 2B3F010C */  jal        new_malloc
/* 3149C 80040C9C 21204000 */   addu      $a0, $v0, $zero
/* 314A0 80040CA0 7B004010 */  beqz       $v0, .L80040E90
/* 314A4 80040CA4 1800A2AF */   sw        $v0, 0x18($sp)
/* 314A8 80040CA8 21200002 */  addu       $a0, $s0, $zero
/* 314AC 80040CAC 495C010C */  jal        LoadFile
/* 314B0 80040CB0 21284000 */   addu      $a1, $v0, $zero
/* 314B4 80040CB4 21880000 */  addu       $s1, $zero, $zero
/* 314B8 80040CB8 03005232 */  andi       $s2, $s2, 0x3
/* 314BC 80040CBC 2000B2AF */  sw         $s2, 0x20($sp)
/* 314C0 80040CC0 82101E00 */  srl        $v0, $fp, 2
.L80040CC4:
/* 314C4 80040CC4 80100200 */  sll        $v0, $v0, 2
/* 314C8 80040CC8 0800D227 */  addiu      $s2, $fp, 0x8
/* 314CC 80040CCC 01003126 */  addiu      $s1, $s1, 0x1
/* 314D0 80040CD0 1800A38F */  lw         $v1, 0x18($sp)
/* 314D4 80040CD4 5C00A58F */  lw         $a1, 0x5C($sp)
/* 314D8 80040CD8 21806200 */  addu       $s0, $v1, $v0
/* 314DC 80040CDC 00000292 */  lbu        $v0, 0x0($s0)
/* 314E0 80040CE0 21200002 */  addu       $a0, $s0, $zero
/* 314E4 80040CE4 1C00B1AF */  sw         $s1, 0x1C($sp)
/* 314E8 80040CE8 0E5F010C */  jal        TextureToVRAM
/* 314EC 80040CEC 5800A2AC */   sw        $v0, 0x58($a1)
/* 314F0 80040CF0 21884000 */  addu       $s1, $v0, $zero
/* 314F4 80040CF4 08000326 */  addiu      $v1, $s0, 0x8
/* 314F8 80040CF8 FF000424 */  addiu      $a0, $zero, 0xFF
.L80040CFC:
/* 314FC 80040CFC FFFF8424 */  addiu      $a0, $a0, -0x1
/* 31500 80040D00 00006294 */  lhu        $v0, 0x0($v1)
/* 31504 80040D04 00800524 */  addiu      $a1, $zero, -0x8000
/* 31508 80040D08 25104500 */  or         $v0, $v0, $a1
/* 3150C 80040D0C 000062A4 */  sh         $v0, 0x0($v1)
/* 31510 80040D10 FAFF8104 */  bgez       $a0, .L80040CFC
/* 31514 80040D14 02006324 */   addiu     $v1, $v1, 0x2
/* 31518 80040D18 08000326 */  addiu      $v1, $s0, 0x8
/* 3151C 80040D1C 80981100 */  sll        $s3, $s1, 2
/* 31520 80040D20 007C0624 */  addiu      $a2, $zero, 0x7C00
/* 31524 80040D24 00FC0534 */  ori        $a1, $zero, 0xFC00
/* 31528 80040D28 FF000424 */  addiu      $a0, $zero, 0xFF
.L80040D2C:
/* 3152C 80040D2C 00006294 */  lhu        $v0, 0x0($v1)
/* 31530 80040D30 00000000 */  nop
/* 31534 80040D34 02004014 */  bnez       $v0, .L80040D40
/* 31538 80040D38 00000000 */   nop
/* 3153C 80040D3C 01000224 */  addiu      $v0, $zero, 0x1
.L80040D40:
/* 31540 80040D40 03004610 */  beq        $v0, $a2, .L80040D50
/* 31544 80040D44 00000000 */   nop
/* 31548 80040D48 02004514 */  bne        $v0, $a1, .L80040D54
/* 3154C 80040D4C 00000000 */   nop
.L80040D50:
/* 31550 80040D50 21100000 */  addu       $v0, $zero, $zero
.L80040D54:
/* 31554 80040D54 000062A4 */  sh         $v0, 0x0($v1)
/* 31558 80040D58 FFFF8424 */  addiu      $a0, $a0, -0x1
/* 3155C 80040D5C F3FF8104 */  bgez       $a0, .L80040D2C
/* 31560 80040D60 02006324 */   addiu     $v1, $v1, 0x2
/* 31564 80040D64 F75E010C */  jal        PaletteToVRAM
/* 31568 80040D68 21200002 */   addu      $a0, $s0, $zero
/* 3156C 80040D6C 00025E26 */  addiu      $fp, $s2, 0x200
/* 31570 80040D70 00000392 */  lbu        $v1, 0x0($s0)
/* 31574 80040D74 00000000 */  nop
/* 31578 80040D78 05006014 */  bnez       $v1, .L80040D90
/* 3157C 80040D7C 21384000 */   addu      $a3, $v0, $zero
/* 31580 80040D80 04000296 */  lhu        $v0, 0x4($s0)
/* 31584 80040D84 06000396 */  lhu        $v1, 0x6($s0)
/* 31588 80040D88 66030108 */  j          .L80040D98
/* 3158C 80040D8C 42100200 */   srl       $v0, $v0, 1
.L80040D90:
/* 31590 80040D90 04000296 */  lhu        $v0, 0x4($s0)
/* 31594 80040D94 06000396 */  lhu        $v1, 0x6($s0)
.L80040D98:
/* 31598 80040D98 00000000 */  nop
/* 3159C 80040D9C 18004300 */  mult       $v0, $v1
/* 315A0 80040DA0 12100000 */  mflo       $v0
/* 315A4 80040DA4 21F0C203 */  addu       $fp, $fp, $v0
/* 315A8 80040DA8 80001624 */  addiu      $s6, $zero, 0x80
/* 315AC 80040DAC 21107102 */  addu       $v0, $s3, $s1
/* 315B0 80040DB0 80100200 */  sll        $v0, $v0, 2
/* 315B4 80040DB4 0C80043C */  lui        $a0, %hi(VRAMItems)
/* 315B8 80040DB8 38AD8424 */  addiu      $a0, $a0, %lo(VRAMItems)
/* 315BC 80040DBC 21184400 */  addu       $v1, $v0, $a0
/* 315C0 80040DC0 21288200 */  addu       $a1, $a0, $v0
/* 315C4 80040DC4 0C80043C */  lui        $a0, %hi(VRAMItems + 0x8)
/* 315C8 80040DC8 40AD8424 */  addiu      $a0, $a0, %lo(VRAMItems + 0x8)
/* 315CC 80040DCC 21104400 */  addu       $v0, $v0, $a0
/* 315D0 80040DD0 01001524 */  addiu      $s5, $zero, 0x1
/* 315D4 80040DD4 5C00B08F */  lw         $s0, 0x5C($sp)
/* 315D8 80040DD8 11006480 */  lb         $a0, 0x11($v1)
/* 315DC 80040DDC 1200A684 */  lh         $a2, 0x12($a1)
/* 315E0 80040DE0 0E007390 */  lbu        $s3, 0xE($v1)
/* 315E4 80040DE4 0F007290 */  lbu        $s2, 0xF($v1)
/* 315E8 80040DE8 00005794 */  lhu        $s7, 0x0($v0)
/* 315EC 80040DEC 40200400 */  sll        $a0, $a0, 1
/* 315F0 80040DF0 21206402 */  addu       $a0, $s3, $a0
/* 315F4 80040DF4 FFFF9424 */  addiu      $s4, $a0, -0x1
/* 315F8 80040DF8 21304602 */  addu       $a2, $s2, $a2
/* 315FC 80040DFC 500011AE */  sw         $s1, 0x50($s0)
/* 31600 80040E00 FFFFD124 */  addiu      $s1, $a2, -0x1
.L80040E04:
/* 31604 80040E04 21200002 */  addu       $a0, $s0, $zero
/* 31608 80040E08 09000224 */  addiu      $v0, $zero, 0x9
/* 3160C 80040E0C 6000A58F */  lw         $a1, 0x60($sp)
/* 31610 80040E10 2C000324 */  addiu      $v1, $zero, 0x2C
/* 31614 80040E14 030002A2 */  sb         $v0, 0x3($s0)
/* 31618 80040E18 070003A2 */  sb         $v1, 0x7($s0)
/* 3161C 80040E1C 040016A2 */  sb         $s6, 0x4($s0)
/* 31620 80040E20 050016A2 */  sb         $s6, 0x5($s0)
/* 31624 80040E24 060016A2 */  sb         $s6, 0x6($s0)
/* 31628 80040E28 160017A6 */  sh         $s7, 0x16($s0)
/* 3162C 80040E2C BBE6010C */  jal        SetSemiTrans
/* 31630 80040E30 2800A7AF */   sw        $a3, 0x28($sp)
/* 31634 80040E34 16000396 */  lhu        $v1, 0x16($s0)
/* 31638 80040E38 2800A78F */  lw         $a3, 0x28($sp)
/* 3163C 80040E3C FFFFB526 */  addiu      $s5, $s5, -0x1
/* 31640 80040E40 0C0013A2 */  sb         $s3, 0xC($s0)
/* 31644 80040E44 0D0012A2 */  sb         $s2, 0xD($s0)
/* 31648 80040E48 140014A2 */  sb         $s4, 0x14($s0)
/* 3164C 80040E4C 150012A2 */  sb         $s2, 0x15($s0)
/* 31650 80040E50 1C0013A2 */  sb         $s3, 0x1C($s0)
/* 31654 80040E54 1D0011A2 */  sb         $s1, 0x1D($s0)
/* 31658 80040E58 240014A2 */  sb         $s4, 0x24($s0)
/* 3165C 80040E5C 250011A2 */  sb         $s1, 0x25($s0)
/* 31660 80040E60 0E0007A6 */  sh         $a3, 0xE($s0)
/* 31664 80040E64 2000A58F */  lw         $a1, 0x20($sp)
/* 31668 80040E68 9FFF6330 */  andi       $v1, $v1, 0xFF9F
/* 3166C 80040E6C 40110500 */  sll        $v0, $a1, 5
/* 31670 80040E70 25186200 */  or         $v1, $v1, $v0
/* 31674 80040E74 160003A6 */  sh         $v1, 0x16($s0)
/* 31678 80040E78 E2FFA106 */  bgez       $s5, .L80040E04
/* 3167C 80040E7C 28001026 */   addiu     $s0, $s0, 0x28
/* 31680 80040E80 1C00B18F */  lw         $s1, 0x1C($sp)
/* 31684 80040E84 00000000 */  nop
/* 31688 80040E88 8EFF201A */  blez       $s1, .L80040CC4
/* 3168C 80040E8C 82101E00 */   srl       $v0, $fp, 2
.L80040E90:
/* 31690 80040E90 1800A48F */  lw         $a0, 0x18($sp)
/* 31694 80040E94 1C40010C */  jal        new_free
/* 31698 80040E98 00000000 */   nop
/* 3169C 80040E9C 5400BF8F */  lw         $ra, 0x54($sp)
/* 316A0 80040EA0 5000BE8F */  lw         $fp, 0x50($sp)
/* 316A4 80040EA4 4C00B78F */  lw         $s7, 0x4C($sp)
/* 316A8 80040EA8 4800B68F */  lw         $s6, 0x48($sp)
/* 316AC 80040EAC 4400B58F */  lw         $s5, 0x44($sp)
/* 316B0 80040EB0 4000B48F */  lw         $s4, 0x40($sp)
/* 316B4 80040EB4 3C00B38F */  lw         $s3, 0x3C($sp)
/* 316B8 80040EB8 3800B28F */  lw         $s2, 0x38($sp)
/* 316BC 80040EBC 3400B18F */  lw         $s1, 0x34($sp)
/* 316C0 80040EC0 3000B08F */  lw         $s0, 0x30($sp)
/* 316C4 80040EC4 0800E003 */  jr         $ra
/* 316C8 80040EC8 5800BD27 */   addiu     $sp, $sp, 0x58
.size LoadCinematicTexture, . - LoadCinematicTexture
